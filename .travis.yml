language: go
go:
    - 1.5.4
    - 1.6.4
    - 1.7.4

script:
    - go get golang.org/x/tools/cmd/cover
    - go get github.com/blevesearch/bleve
    - go get github.com/blevesearch/bleve/http
    - go get github.com/spf13/hugo/commands
    - go get github.com/spf13/hugo/hugolib
    - go get github.com/spf13/viper
    - go get github.com/rs/cors
    - go clean
    - rm -rf test/indexes
    - rm -rf test/public
    - go vet -v
    - go test -v -cover
    - go build -ldflags "-X main.version=$(git describe --tags) -s -w"
    - ./hugo-search -version
